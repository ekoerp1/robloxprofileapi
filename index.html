<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta content="width=device-width, initial-scale=1.0" name="viewport" />
  <title>Roblox User Profile</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet" />
  <style>
    .hidden { display: none; }
    .selected { border-b-2 border-black; }
  </style>
</head>
<body class="bg-gray-100 font-sans">
  <div class="max-w-4xl mx-auto p-4">
    <!-- Profile Header -->
    <div class="flex flex-col sm:flex-row items-center space-x-0 sm:space-x-4 space-y-4 sm:space-y-0">
      <img alt="Profile picture of user" class="w-24 h-24 rounded-full" id="profile-picture" src="https://www.roblox.com/headshot-thumbnail/image?userId=1&width=150&height=150&format=png" />
      <div class="text-center sm:text-left">
        <h1 class="text-2xl font-bold" id="display-name">Display Name</h1>
        <p class="text-gray-500" id="username">@Username</p>
        <p class="text-gray-700 mt-2" id="account-created">Account Created: </p>
      </div>
    </div>

    <!-- About Section -->
    <div id="about-section" class="mt-4">
      <h2 class="text-lg font-bold">About</h2>
      <p class="text-gray-700" id="description">Description goes here.</p>
    </div>

    <!-- Loader and Error Message -->
    <div id="loader" class="hidden text-gray-500 mt-4">Loading...</div>
    <div id="error-message" class="hidden text-red-500 mt-4">User not found.</div>
  </div>

  <script>
    // Function to get the ID from the URL
    function getUserIdFromUrl() {
      const path = window.location.pathname; // Get the full path
      const segments = path.split('/'); // Split path into segments
      return segments[segments.length - 1]; // Return the last segment (ID)
    }

    // Elements to update with fetched data
    const displayNameElement = document.getElementById('display-name');
    const usernameElement = document.getElementById('username');
    const accountCreatedElement = document.getElementById('account-created');
    const descriptionElement = document.getElementById('description');
    const profilePictureElement = document.getElementById('profile-picture');
    const loader = document.getElementById('loader');
    const errorMessage = document.getElementById('error-message');

    // Function to fetch user data from Roblox API
    async function fetchUserData(userId) {
      loader.classList.remove('hidden');
      errorMessage.classList.add('hidden');

      try {
        const response = await fetch(`https://users.roblox.com/v1/users/${userId}`);
        if (!response.ok) {
          throw new Error('User not found');
        }

        const data = await response.json();

        // Format account creation date
        const createdDate = new Date(data.created).toLocaleDateString();

        // Update the profile page with fetched data
        displayNameElement.textContent = data.displayName || 'N/A';
        usernameElement.textContent = `@${data.name || 'N/A'}`;
        accountCreatedElement.textContent = `Account Created: ${createdDate}`;
        descriptionElement.textContent = data.description || 'No description available.';
        profilePictureElement.src = `https://www.roblox.com/headshot-thumbnail/image?userId=${data.id}&width=150&height=150&format=png`;

      } catch (error) {
        errorMessage.textContent = error.message;
        errorMessage.classList.remove('hidden');
      } finally {
        loader.classList.add('hidden');
      }
    }

    // Get the user ID from the URL and fetch data
    const userId = getUserIdFromUrl();
    if (userId) {
      fetchUserData(userId);
    } else {
      errorMessage.textContent = 'No user ID provided in the URL.';
      errorMessage.classList.remove('hidden');
    }
  </script>
</body>
</html>
